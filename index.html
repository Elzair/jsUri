<!DOCTYPE html>  <html> <head>   <title>jsUri - URI library for node and browser javascript</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8" />   <link rel="stylesheet" media="all" href="docco.css" />   <meta name="description" content="URI/URL and query string parsing, construction and manipulation library in javascript"/> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>jsUri</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Uri and query string manipulation in javascript.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>This project incorporates the excellent <a href="http://blog.stevenlevithan.com/archives/parseuri">parseUri</a> regular expression library by Steven Levithan. You can safely parse URLs of all shapes and sizes, however invalid or hideous.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Usage</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p><a href="https://raw.github.com/derek-watson/jsUri/master/Uri.min.js">Download</a> and use in the browser:</p>

<p><code>&lt;script src="Uri.min.js"&gt;&lt;/script&gt;</code></p>

<p>or use the node module:</p>

<p><code>npm install Uri</code></p>

<p><code>var Uri = require('Uri');</code></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Constructor</h2>

<p>Pass anything that a browser would recognize as a url to the new Uri() constructor.
Use the accessor methods to get at the various parts.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;http://user:pass@github.com:81/index.html?q=#fragment&#39;</span><span class="p">);</span>

<span class="nx">uri</span><span class="p">.</span><span class="nx">protocol</span><span class="p">();</span> <span class="c1">// http</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">();</span> <span class="c1">// user:pass</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">host</span><span class="p">();</span>     <span class="c1">// github.com</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">port</span><span class="p">();</span>     <span class="c1">// 81</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">path</span><span class="p">();</span>     <span class="c1">// /index.html</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>    <span class="c1">// q=</span>
<span class="nx">uri</span><span class="p">.</span><span class="nx">anchor</span><span class="p">();</span>   <span class="c1">// fragment</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Make changes to individual parts</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;github.com&#39;</span><span class="p">).</span><span class="nx">protocol</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">);</span>        <span class="c1">// https://github.com</span>
<span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;github.com&#39;</span><span class="p">).</span><span class="nx">userInfo</span><span class="p">(</span><span class="s1">&#39;user:pass&#39;</span><span class="p">);</span>    <span class="c1">// https://user:pass@github.com</span>
<span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;github.com&#39;</span><span class="p">).</span><span class="nx">host</span><span class="p">(</span><span class="s1">&#39;www.github.com&#39;</span><span class="p">);</span>   <span class="c1">// https://www.github.com</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Fluent Setters</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>The fluent interface provides a simple way to chain property assignment</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p><em>https://username:password@www.test.com:8080/index.html?this=that&amp;some=thing#content</em></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">setPath</span><span class="p">(</span><span class="s1">&#39;/index.html&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setAnchor</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setHost</span><span class="p">(</span><span class="s1">&#39;www.test.com&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setPort</span><span class="p">(</span><span class="mi">8080</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setUserInfo</span><span class="p">(</span><span class="s1">&#39;username:password&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setProtocol</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setQuery</span><span class="p">(</span><span class="s1">&#39;this=that&amp;some=thing&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><em>https://www.yahoo.com</em></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;http://www.test.com&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setHost</span><span class="p">(</span><span class="s1">&#39;www.yahoo.com&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setProtocol</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p><em>/archives/1979?page=1</em></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">setPath</span><span class="p">(</span><span class="s1">&#39;/archives/1979/&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">setQuery</span><span class="p">(</span><span class="s1">&#39;?page=1&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>Query Parameter Access and Manipulation</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Special methods are available for fetching, building and modifying query string parameters. An emhpasis is placed on query string integrity; duplicate parameter names and values are preserved. Parameter ordering is preserved when possible. URI Components are decoded for comparision, but are otherwise left in their original state.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h3>Getting query param values by name</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Returns the first query param value for the key</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?cat=1&amp;cat=2&amp;cat=3&#39;</span><span class="p">).</span><span class="nx">getQueryParamValue</span><span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>             <span class="c1">// 1</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Returns all query param values for the given key</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?cat=1&amp;cat=2&amp;cat=3&#39;</span><span class="p">).</span><span class="nx">getQueryParamValues</span><span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>            <span class="c1">// [1, 2, 3]</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h3>Getting all query param keys and values</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Internally, query key/value pairs are stored as a series of two-value arrays in the Query object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?a=b&amp;c=d&#39;</span><span class="p">).</span><span class="nx">query</span><span class="p">().</span><span class="nx">params</span>                          <span class="c1">// [ [&#39;a&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]]</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <h3>Adding query param values</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">().</span><span class="nx">addQueryParam</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="s1">&#39;books&#39;</span><span class="p">)</span>                         <span class="c1">// ?q=books</span>

<span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;http://www.github.com&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">addQueryParam</span><span class="p">(</span><span class="s1">&#39;testing&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">addQueryParam</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>                                    <span class="c1">// http://www.github.com/?testing=123&amp;one=1</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <pre><code>// insert param at index 0
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?b=2&amp;c=3&amp;d=4&#39;</span><span class="p">).</span><span class="nx">addQueryParam</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>            <span class="c1">// ?a=1&amp;b=2&amp;c=3&amp;d=4</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h3>Replacing query param values</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Replaces every query string parameter named <code>key</code> with a single instance with the value <code>newVal</code>. If <code>oldValue</code> is supplied, only parameters valued <code>oldVal</code> will be replaced.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?a=1&amp;b=2&amp;c=3&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replaceQueryParam</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;eh&#39;</span><span class="p">)</span>          <span class="c1">// ?a=eh&amp;b=2&amp;c=3</span>

<span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?a=1&amp;b=2&amp;c=3&amp;c=4&amp;c=5&amp;c=6&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replaceQueryParam</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;five&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">)</span>   <span class="c1">// ?a=1&amp;b=2&amp;c=3&amp;c=4&amp;c=five&amp;c=6</span>

<span class="k">new</span> <span class="nx">Uri</span><span class="p">().</span><span class="nx">replaceQueryParam</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1">// ?page=2</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <h3>Deleting query param values</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Removes instances of query parameters named <code>key</code>. If <code>value</code> is passed, only params named <code>key</code> and valued <code>value</code> will be deleted.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;?a=1&amp;b=2&amp;c=3&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">deleteQueryParam</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>                 <span class="c1">// ?b=2&amp;c=3</span>

<span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;test.com?a=1&amp;b=2&amp;c=3&amp;a=eh&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">deleteQueryParam</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;eh&#39;</span><span class="p">)</span>           <span class="c1">// test.com/?a=1&amp;b=2&amp;c=3</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <h2>Object Cloning</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Duplication (via <code>.clone()</code>) is an easy way to inflate an identical uri object, which you can muck around with as much as you like without destroying the original.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">baseUri</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uri</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">);</span>

    <span class="nx">baseUri</span><span class="p">.</span><span class="nx">clone</span><span class="p">().</span><span class="nx">setProtocol</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">);</span>  <span class="c1">// https://localhost/</span>
    <span class="nx">baseUri</span><span class="p">;</span>                               <span class="c1">// http://localhost/</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div>   <a href="https://github.com/derek-watson/jsUri"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a> </body> </html> 